---
title: "Jogos de Tabuleiro para jogadores 'solo'"
author: "Marcio Vakassugui"
date: '2022-04-29'

output: 
  html_document:
    highlight: arrow
    code_folding: hide
    self_contained: true
    theme: lumen
    toc: yes
    toc_float: yes
    smooth_scroll: no
    collapsed: yes
runtime: shiny
---

```{r setup }
#| include=FALSE

knitr::opts_chunk$set(
  echo = TRUE,
  message = FALSE,
  warning = FALSE,
  fig.width = 10,
  fig.height = 7
)

```


```{r inclui figura jogo tabuleiro}
#| fig.align = "center",
#| out.width = "100%",
#| echo = FALSE,

knitr::include_graphics("https://www.deveserisso.com.br/blog/wp-content/uploads/2015/10/colonizadores-de-catan.jpg")
```

# Contexto

<div align=justify style="text-indent: 3em;"> Durante a pandemia de covid-19 e em plena era dos jogos "*digitais*", observa-se uma crescente procura pelos chamados jogos *"analógicos"*, jogos de mesa e de tabuleiro, que retornaram às prateiras das lojas e *sites* especializados. Segundo dados da [*Euromonitor International*](https://www.dicebreaker.com/categories/board-game/news/games-and-puzzles-market-2020-2021), empresa britânica de pesquisa de mercado,  a combinação de tempo livre e nostalgia fez com que os europeus voltassem a procurá-los como opção de entretenimento. No Brasil, este comportamento também se repete. O mercado de brinquedos e jogos tradicionais aumentou de 1% do período pré-pandêmico para 3,16% em 2022.

Inclusive, há notícias de que famosos jogos de *consoles* como [*"Assassin's Creed"*](https://olhardigital.com.br/2022/03/17/games-e-consoles/jogo-de-tabuleiro-de-assassins-creed-sera-lancado-em-2022/) ou [*"The Elder Scrolls 5: Skyrim"*](https://canaltech.com.br/games/the-elder-scrolls-5-skyrim-tera-jogo-de-tabuleiro-em-2022-200773/)  tenham suas versões de tabuleiro lançadas em 2022.

O trabalho final do curso de Visualizações-I, **da Curso-R**, tem por objetivo analisar um *dataset* e construir visualizações gráficas a partir de seus dados. 

Uma das sugestões da Curso-R foi a base "*Board Games*", disponibilizada pelo *site* *Kaggle* e utilizada pelo *Tidytuesday*, evento semanal que desafia os usuários da linguagem R a construir visualizações sobre um tema e assim promover discussões saudáveis. Resolvi usá-la para a elaboração deste trabalho.

As visualizações que apresentarei neste relatório foram criadas para aqueles que necessitam de jogos de um ou mais jogadores, chamados de **"solo board games"** por permitirem  partidas de apenas um jogador.
</div>


```{r leitura de pacotes}
#| echo = TRUE,
#| message = FALSE,
#| include = FALSE

library(tidyverse)
library(readr)
library(ggtext)
library(stringr)
library(kableExtra)
library(ggrepel)
```



```{r leitura da base}
#| echo = TRUE,
#| message = FALSE,
#| include = FALSE

jogos_tabuleiro <- read_rds("../data/base_preparada.RDS")
```

# Descrição das variáveis
<div align=justify style="text-indent: 3em;"> A base *"Board Games"* é composta pelos arquivos *"ratings"* e *"details"*, que trazem informações sobre jogos de tabuleiros como:

<style type="text/css">
.tg  {border-collapse:collapse;border-color:#bbb;border-spacing:0;}
.tg td{background-color:#E0FFEB;border-color:#bbb;border-style:solid;border-width:1px;color:#594F4F;
  font-family:Arial, sans-serif;font-size:14px;overflow:hidden;padding:4px 5px;word-break:normal;}
.tg th{background-color:#9DE0AD;border-color:#bbb;border-style:solid;border-width:1px;color:#493F3F;
  font-family:Arial, sans-serif;font-size:14px;font-weight:normal;overflow:hidden;padding:4px 5px;word-break:normal;}
.tg .tg-onvs{background-color:#ffffff;border-color:#c0c0c0;color:#000000;font-family:Arial, Helvetica, sans-serif !important;
  font-size:13px;text-align:left;vertical-align:top}
.tg .tg-nfzr{background-color:#ecf4ff;border-color:#c0c0c0;color:#000000;font-family:Arial, Helvetica, sans-serif !important;
  font-size:13px;text-align:left;vertical-align:top}
.tg .tg-nh0w{background-color:#237ca9;border-color:#c0c0c0;color:#ffffff;font-family:Arial, Helvetica, sans-serif !important;
  font-size:14px;font-weight:bold;text-align:center;vertical-align:top}
.tg .tg-xbii{background-color:#237ca9;border-color:#c0c0c0;color:#ffffff;font-family:Arial, Helvetica, sans-serif !important;
  font-size:13px;font-weight:bold;text-align:left;vertical-align:middle}
.tg .tg-ddzq{background-color:#237ca9;border-color:#c0c0c0;color:#ffffff;font-family:Arial, Helvetica, sans-serif !important;
  font-size:13px;font-weight:bold;text-align:left;vertical-align:top}
</style>
<table class="tg" style="undefined;table-layout: fixed; width: 827px">
<colgroup>
<col style="width: 211.005682px">
<col style="width: 211.005682px">
<col style="width: 405.005682px">
</colgroup>
<thead>
  <tr>
    <th class="tg-nh0w" colspan="3">Ratings.CSV</th>
  </tr>
</thead>
<tbody>
  <tr>
    <td class="tg-xbii">Variável</td>
    <td class="tg-ddzq">Tipo</td>
    <td class="tg-ddzq">Descrição</td>
  </tr>
  <tr>
    <td class="tg-nfzr">num</td>
    <td class="tg-nfzr">double</td>
    <td class="tg-nfzr">Número do jogo</td>
  </tr>
  <tr>
    <td class="tg-onvs">id</td>
    <td class="tg-onvs">double</td>
    <td class="tg-onvs">ID do jogo</td>
  </tr>
  <tr>
    <td class="tg-nfzr">name</td>
    <td class="tg-nfzr">character</td>
    <td class="tg-nfzr">Nome do jogo</td>
  </tr>
  <tr>
    <td class="tg-onvs">year</td>
    <td class="tg-onvs">double      </td>
    <td class="tg-onvs">Ano de lançamento    </td>
  </tr>
  <tr>
    <td class="tg-nfzr">rank</td>
    <td class="tg-nfzr">double</td>
    <td class="tg-nfzr">Ranking </td>
  </tr>
  <tr>
    <td class="tg-onvs">average</td>
    <td class="tg-onvs">double</td>
    <td class="tg-onvs">Média</td>
  </tr>
  <tr>
    <td class="tg-nfzr">bayes_average</td>
    <td class="tg-nfzr">double</td>
    <td class="tg-nfzr">Média bayesiana</td>
  </tr>
  <tr>
    <td class="tg-onvs">users_rated</td>
    <td class="tg-onvs">double</td>
    <td class="tg-onvs">Total de votações dos usuários</td>
  </tr>
  <tr>
    <td class="tg-nfzr">url</td>
    <td class="tg-nfzr">character</td>
    <td class="tg-nfzr">URL do jogo</td>
  </tr>
  <tr>
    <td class="tg-onvs">thumbnail</td>
    <td class="tg-onvs">character</td>
    <td class="tg-onvs">Thumbnail do jogo</td>
  </tr>
</tbody>
</table>
<br>

<style type="text/css">
.tg  {border-collapse:collapse;border-color:#ccc;border-spacing:0;}
.tg td{background-color:#fff;border-color:#ccc;border-style:solid;border-width:1px;color:#333;
  font-family:Arial, sans-serif;font-size:14px;overflow:hidden;padding:4px 5px;word-break:normal;}
.tg th{background-color:#f0f0f0;border-color:#ccc;border-style:solid;border-width:1px;color:#333;
  font-family:Arial, sans-serif;font-size:14px;font-weight:normal;overflow:hidden;padding:4px 5px;word-break:normal;}
.tg .tg-onvs{background-color:#ffffff;border-color:#c0c0c0;color:#000000;font-family:Arial, Helvetica, sans-serif !important;
  font-size:13px;text-align:left;vertical-align:top}
.tg .tg-nfzr{background-color:#ecf4ff;border-color:#c0c0c0;color:#000000;font-family:Arial, Helvetica, sans-serif !important;
  font-size:13px;text-align:left;vertical-align:top}
.tg .tg-nh0w{background-color:#237ca9;border-color:#c0c0c0;color:#ffffff;font-family:Arial, Helvetica, sans-serif !important;
  font-size:14px;font-weight:bold;text-align:center;vertical-align:top}
.tg .tg-xbii{background-color:#237ca9;border-color:#c0c0c0;color:#ffffff;font-family:Arial, Helvetica, sans-serif !important;
  font-size:13px;font-weight:bold;text-align:left;vertical-align:middle}
.tg .tg-ddzq{background-color:#237ca9;border-color:#c0c0c0;color:#ffffff;font-family:Arial, Helvetica, sans-serif !important;
  font-size:13px;font-weight:bold;text-align:left;vertical-align:top}
</style>
<table class="tg" style="undefined;table-layout: fixed; width: 837px">
<colgroup>
<col style="width: 215.005682px">
<col style="width: 215.005682px">
<col style="width: 407.005682px">
</colgroup>
<thead>
  <tr>
    <th class="tg-nh0w" colspan="3">Details.csv</th>
  </tr>
</thead>
<tbody>
  <tr>
    <td class="tg-xbii">Variável                      </td>
    <td class="tg-ddzq">Tipo                          </td>
    <td class="tg-ddzq">Descrição                    </td>
  </tr>
  <tr>
    <td class="tg-nfzr">num</td>
    <td class="tg-nfzr">double</td>
    <td class="tg-nfzr">Número do jogo</td>
  </tr>
  <tr>
    <td class="tg-onvs">id</td>
    <td class="tg-onvs">double</td>
    <td class="tg-onvs">ID do jogo</td>
  </tr>
  <tr>
    <td class="tg-nfzr">primary</td>
    <td class="tg-nfzr">character</td>
    <td class="tg-nfzr">Nome do jogo</td>
  </tr>
  <tr>
    <td class="tg-onvs">year published</td>
    <td class="tg-onvs">double      </td>
    <td class="tg-onvs">Ano de lançamento    </td>
  </tr>
  <tr>
    <td class="tg-nfzr">min_players</td>
    <td class="tg-nfzr">double</td>
    <td class="tg-nfzr">Número mínimo de jogadores</td>
  </tr>
  <tr>
    <td class="tg-onvs">max_players</td>
    <td class="tg-onvs">double</td>
    <td class="tg-onvs">Número máximo de jogadores</td>
  </tr>
  <tr>
    <td class="tg-nfzr">playing_time</td>
    <td class="tg-nfzr">double</td>
    <td class="tg-nfzr">Tempo de jogo em minutos</td>
  </tr>
  <tr>
    <td class="tg-onvs">min_play_time</td>
    <td class="tg-onvs">double</td>
    <td class="tg-onvs">Tempo mínimo de jogo em minutos</td>
  </tr>
  <tr>
    <td class="tg-nfzr">max_play_time</td>
    <td class="tg-nfzr">double</td>
    <td class="tg-nfzr">Tempo máximo de jogo em minutos</td>
  </tr>
  <tr>
    <td class="tg-onvs">min_age</td>
    <td class="tg-onvs">double</td>
    <td class="tg-onvs">Idade mínima</td>
  </tr>
  <tr>
    <td class="tg-nfzr">board_game_category</td>
    <td class="tg-nfzr">character</td>
    <td class="tg-nfzr">Categoria</td>
  </tr>
  <tr>
    <td class="tg-onvs">board_game_mechanic</td>
    <td class="tg-onvs">character</td>
    <td class="tg-onvs">Mecânica </td>
  </tr>
  <tr>
    <td class="tg-nfzr">board_game_family</td>
    <td class="tg-nfzr">character </td>
    <td class="tg-nfzr">Família do jogo</td>
  </tr>
  <tr>
    <td class="tg-onvs">board_game_expansion</td>
    <td class="tg-onvs">character</td>
    <td class="tg-onvs">Expansão</td>
  </tr>
  <tr>
    <td class="tg-nfzr">board_game_implementation</td>
    <td class="tg-nfzr">character</td>
    <td class="tg-nfzr">Execução</td>
  </tr>
  <tr>
    <td class="tg-onvs">board_game_designer</td>
    <td class="tg-onvs">character</td>
    <td class="tg-onvs">Designer / Criador</td>
  </tr>
  <tr>
    <td class="tg-nfzr">board_game_artist</td>
    <td class="tg-nfzr">character</td>
    <td class="tg-nfzr">Artista</td>
  </tr>
  <tr>
    <td class="tg-onvs">board_game_publisher</td>
    <td class="tg-onvs">character</td>
    <td class="tg-onvs">Editora</td>
  </tr>
  <tr>
    <td class="tg-nfzr">owned</td>
    <td class="tg-nfzr">double</td>
    <td class="tg-nfzr">Adquiridos</td>
  </tr>
  <tr>
    <td class="tg-onvs">trading</td>
    <td class="tg-onvs">double</td>
    <td class="tg-onvs">Comercializados</td>
  </tr>
  <tr>
    <td class="tg-nfzr">wanting</td>
    <td class="tg-nfzr">double</td>
    <td class="tg-nfzr">Número de usuários que gostariam de adquirir o jogo</td>
  </tr>
  <tr>
    <td class="tg-onvs">wishing</td>
    <td class="tg-onvs">double</td>
    <td class="tg-onvs">Número de usuários que desejariam ganhar o jogo</td>
  </tr>
</tbody>
</table>


## Melhores do Ranking e sua notas médias.

<div align=justify style="text-indent: 3em;"> Assim como os jogos digitais alguns jogos de tabuleiro permitem que a partida seja realizada por apenas um jogador que pode aproveitar os momentos em que está só, fugir de toda tecnologia e se aventurar em um jogo de tabuleiro. 

Apresentarei as opções mais procuradas, desejadas e compradas dos jogos de acordo com a base *Board Game* no seuinte gráfico conhecido como *"lollipop plot"*, um tipo de um gráfico de barras em que as barras são substitúidas por uma linha e um círulo em sua extremidade.

Estes jogos permitem que o jogador participe de sessões do jogo sozinho ou com mais jogadores. Estão ordenados pela sua posição no ranking geral entre os jogos e trazem as respectivas notas médias bayesianas.

Nesta análise, considerou-se somente os 20 jogos melhores avaliados entre aqueles com no mínimo 10.000 avaliações.

</div>

```{r grafico01 - Jogos para um jogador}
#| echo = TRUE,
#| fig.align="center",
#| fig.width = 9,
#| fig.height = 7,
#| out.width = 1500 ,
#| out.height = 800,

cor <- c(                                        # pallet de cores para os elementos gráficos.
    "#C2D9FF", "#871607", "#081121", "#EA250B", "#30292F",
    "#CCAA00", "#CB8589", "#811192", "#EF7B45", "#4BB3FD",
    "#735CDD", "#BD2554", "#829DB0", "#0DF205", "#37000A",
    "#201E1F", "#632A50", "#390099", "#F2542D", "#0A369D"
    )

jogos_tabuleiro |>
    filter(users_rated >= 10000 & !is.na(rank) & min_players == 1) |>
    arrange(rank) |>                                                          # ordenar por ranking.
    slice_head(n = 20) |>                                               # vinte primeiros elementos.
    ggplot(aes(
        x = fct_reorder(name, rank, .desc = TRUE),              # reordenar as colunas como fatores.
        y = rank,
        label = round(bayes_average, 2)
        )
        ) +
    geom_segment(aes(x = fct_reorder(name, rank, .desc = TRUE),         # criar o elemento segmento.
                     xend = name,
                     y = 0,
                     yend = rank
                     ),
                 color = cor,   
                 size = 1.5
                 ) +
    geom_point(aes(color = year),                                        # criar o elemento círculo.
               size = 8.5,
               color = cor    
               ) +
    geom_label(                                                                # formatar os labels.
        size = 3, 
        alpha = 0,
        label.size = NA,    
        fontface = "bold",    
        color = "#FFFFFF"  
        ) +
    geom_curve(aes(y = 2.5,                                          # formatar curva para anotação.
                   x = 20.2,  
                   xend = 17.9,     
                   yend = 24.2   
                   ),
               arrow = arrow(                                            # formatar a seta da curva.
                 type = "closed",          
                 length = unit(0.02, "npc")     
                 ),
               curvature = -0.1,  
               color = "#C2D9FF"   
               ) +
    labs(                                             # editar o texto do título, subtítulo e eixos.
        title = "Jogos de Tabuleiro para quem for jogar 
        *<span style = 'color:#D7CF07;'>sozinho!!</span>*",
        subtitle ="Os vinte melhores jogos com suas posições no 
        *<span style = 'color:#D7CF07;'>ranking geral</span>* e 
        *<span style = 'color:#D7CF07;'>notas médias</span>*",
        y = "Ranking dos Jogos",
        x = ""
        ) +
    theme_classic() +                                                  # seleção do tema do gráfico.
    scale_y_continuous(breaks = seq(1, 44, 2)) +                        # formatar escala do eixo x.
    theme(                                                          # customizar:
        panel.background = element_rect(fill = "#237CA9"),                       # fundo do gráfico.
        plot.background = element_rect(fill = "#237CA9"),             # fundo da moldura retangular.
        plot.margin = unit(c(1, 1, 1, -0.3), "cm"),                         # distância das margens.
        plot.title = element_markdown(                                          # título do gráfico.
            size = 32,  
            face = "plain",    
            family = "FrankyOutline",                                             # fonte do título.
            hjust = 3,
            margin = unit(c(0, 0, 0.5, 0), "cm")                                # margens do título.
            ), 
        plot.subtitle = element_markdown(
            size = 10,
            family = "LexieReadable",   
            hjust = 0,
            ),
        text = element_text(                                                    # textos do gráfica.
            family = "LexieReadable",    
            color = "#FFFFFF",
            size = 10,
            hjust = 0,
            face = "bold"
            ),
        axis.text.x = element_text(                                               # texto do eixo x.
            color = "#FFFFFF",       
            size = 7.5,
            face = "bold",
            margin = unit(c(0.3, 0, 0.5, 0), "cm")  
            ),
        axis.text.y = element_markdown(                                           # texto do eixo y.
            color = "#FFFFFF",    
            size = 9.5,
            face = "bold",
            family = "LexieReadable", 
            ),
      axis.ticks.x = element_line(color = "#1F1F1F"),                             # ticks do eixo x.
      axis.line.x = element_line(color = "#1F1F1F"),                       # cor da linha do eixo x.
      axis.ticks.y = element_line(color = "#1F1F1F"),                 # padrões dos ticks do eixo x.
      axis.line.y = element_line(
          color = "#000000",                                               # cor da linha do eixo x.
          size = 0.4,
          ),
      axis.title = element_text(                                        # texto do título do eixo x.
          face = "bold",    
          size = 10,
          hjust = 0.5,
          ),
      legend.position = "none"                                                   # exclui a legenda.
      ) +
    coord_flip() +                                                           # inverte o eixo x e y.
    annotate( "text",
               x = 16, y = 31, label = "Precisando jogar sozinho? 
               Considerando o ranking, Gloomhavem é a
               melhor indicação. Ele ocupa a 1ª  posição
               no rankig geral entre jogos  de  tabuleiro
               com a nota 8.51 e permite jogar  sozinho.",
               color = "#C2D9FF", 
               size = 3.4,
               family = "LexieReadable",
               fontface = "bold"
              )

```

## O mais desejados e seus *rankings*

<div align=justify style="text-indent: 3em;">Entenda por desejados como aqueles jogos em que os avaliadores expressaram seu desejo de ganhá-los, ou seja, colocariam em suas *wishlists* (listas de desejos).

Quais seriam os jogos mais desejados e suas posições no *ranking*?

Novamente considerou-se apenas os jogos com mais de 10000 avaliações.  O gráfico a seguir apresenta os vinte jogos mais desejados.

```{r grafico02 - Jogos para um jogador-b}
#| echo = TRUE,
#| fig.align = "center",
#| fig.widht = 9.5,
#| fig.height = 7.5,
#| out.width = 1500,
#| out.height = 800


jogos_tabuleiro |>
    filter(users_rated >= 10000 & !is.na(rank) & min_players == 1) |>
    arrange(desc(wishing)) |>
    slice_head(n = 20) |>
    ggplot(aes(
        x = fct_reorder(name, wishing, .desc = FALSE),          # reordenar as colunas como fatores.
        y = wishing,
        label = round(rank, 2)
        )
        )+
    geom_segment(aes(
        x = fct_reorder(name, wishing, .desc = FALSE),                  # criar o elemento segmento.
        xend = name,
        y = 0,
        yend = wishing
    ),
    color = cor,         
    size = 1.5
    ) +
    geom_point(aes(color = year),                                        # criar o elemento círculo.
               size = 8.8,
               color = cor                     
    ) +
    geom_label(                                                                 # formata os labels.
        size = 3,    
        alpha = 0,
        label.size = NA,
        fontface = "bold",
        color = "#FFFFFF"
    ) +
    geom_curve(aes(                                                  # formatar curva para anotação.
        x = 20.0,
        y = 19950,
        xend = 7.2,
        yend = 19280
    ),
    arrow = arrow(                                                       # formatar a seta da curva.
        type = "closed",                                                             
        length = unit(0.02, "npc")
    ),
    curvature = -0.6,                                 # editar o texto do título, subtítulo e eixos.
    color = "#C2D9FF"
    ) +
    labs(                                             # editar o texto do título, subtítulo e eixos.
        title = "Jogos de Tabuleiro para quem for jogar *<span style = 'color:#FFC745;'>
        sozinho!!</span>*",
        subtitle ="Os vinte jogos mais desejados com suas posições e ranking",
        y = "Ranking dos Jogos",
        x = ""
    ) +
    theme_classic() +                                                  # seleção do tema do gráfico.
    scale_y_continuous(breaks = seq(0, 23000, 2000),
                       limits = c(0, 23000)) +
    theme(                                                     # customizar:
        panel.background = element_rect(fill = "#237CA9"),                       # fundo do gráfico.
        plot.background = element_rect(fill = "#237CA9"),             # fundo da moldura retangular.
        plot.margin = unit(c(1, 1, 1, -0.4), "cm"),
        plot.title = element_markdown(                                          # título do gráfico.
            size = 34.2,
            face = "plain",
            family = "FrankyOutline",
            hjust = 3,
            margin = unit(c(0.3, -0.3, 0.5, -0,2), "cm")
        ),
        plot.subtitle = element_markdown(                                     # padrões do subítulo.
            size = 10,
            family = "LexieReadable",
            hjust = 0,
            ),
        text = element_text(                                                    # textos do gráfica.
            family = "LexieReadable",
            color = "#FFFFFF",
            size = 10,
            hjust = 0,
            face = "bold"
        ),
        
        axis.text.x = element_text(                                               # texto do eixo x.
            color = "#FFFFFF",
            size = 7.5,
            face = "bold",
            margin = unit(c(0.3, 0, 0.5, 0), "cm")
            ),
        axis.text.y = element_markdown(                                           # texto do eixo y.
            color = "#FFFFFF",
            size = 10,
            face = "bold",
            family = "LexieReadable",
            ),
        axis.ticks.x = element_line(color = "#1F1F1F"),                           # ticks do eixo x.
        axis.line.x = element_line(color = "#1F1F1F"),                     # cor da linha do eixo x.
        axis.ticks.y = element_line(color = "#1F1F1F"),               # padrões dos ticks do eixo x.
        axis.line.y = element_line(                                    # padrões da linha do eixo x.
            color = "#000000",
            size = 0.4,
            ),
        axis.title = element_text(                                      # texto do título do eixo x.
          face = "bold",
          size = 10,
          hjust = 0.5,
          ),
        legend.position = "none"                                      # exclui a legenda do gráfico.
    ) +
    coord_flip() +                                                  # inverte o eixo x com o eixo y.
    annotate(                                                             # faz anotação no gráfico.
        "text",
        x = 4, y = 17000, label = "Ainda na dúvida?
    Agora  temos  os  jogos  mais desejados  e seus
    rankings.  Observe  que ainda  os  jogos Scythe,
    Terraforming  Mars,  Gioomhaven,  Spirit Island,
    Gala Project e Nemesis da lista acima continuam
    em destaque, mas Wingspan e Everdell precisam
    ser observados!                                                      ",
        color = "#C2D9FF", size = 3.5,
        family = "LexieReadable",
        fontface = "bold"
    )
```

<div align=justify style="text-indent: 3em;"> Entretanto, vimos que nem todos os jogos do topo do *ranking* são os mais desejados pelos usuários. Fatores como preço, tempo mínimo de jogo, categoria, mecânica do jogo, faixa etária afetam o desejo de ganhar o jogo.


Nos gráficos que seguirão, consideraremos que:

- Um tema que não chama a atenção do jogador o torna desinteressante, é preciso escolher bem entre os vários temas disponiveis como aventura, terror, médico, animais, ficção científica e até inspirados em outras obras como livros;  </p>

- O tempo de jogo é importante para quem joga sozinho, então  um jogo que demore em média 4 horas talvez não seja o que você deseja; 

- Se quem vai jogar é uma criança, deve-se observar a idade mínima. Muitos jogos exigem um raciocínio analítico e uso de estratégias
avançadas, por este motivo os fabricantes informam a idade mínima recomendada e  

- A "rejogabilidade", ou seja, jogar novamente com novas aventuras, é importante. Então prefira aqueles com extensões de jogos.

</div>

## Jogos por Categoria

```{r analise mais desejados por categoria e tempo minimo}
#| echo = FALSE

# Melhores jogos para jogar sozinho por tema, considerando o ranking, os mais desejados, menor tempo
# médio de jogo

# Separar a coluna description em outras 5 colunas
jogos_tabuleiro_categoria <- jogos_tabuleiro |>
    separate(col = board_game_category,
             into = c("category1",
                      "category2",
                      "category3",
                      "category4",
                      "category5"),
        sep = "\\,",
        remove = TRUE
    )

# Pivotar a base de wide para long e então analisar as categorias.

jogos_tabuleiro_categoria <- jogos_tabuleiro_categoria |>
    pivot_longer(
        cols = c("category1", "category2", "category3",
                 "category4", "category5"),
        names_to = "category_number",
        values_to = "category",
        values_drop_na = TRUE
    )


# Os melhores por categoria

best_for_category <- function(.category_name) {
    jogos_tabuleiro_categoria |> 
        select(name, min_play_time, wishing, category, rank, owned, min_players) |>
        filter(category == .category_name & min_play_time <=160 & min_players>=1 & owned >=5000) |> 
        arrange(desc(wishing)) |> 
        head(2) |>
        slice_max(wishing)
}

# Inserção do nome do melhor jogo por categoria no gráfico

anotar <- function(.best_category_name) {
    annotate("label",
             family = "LexiReadable",
             x = .best_category_name$wishing,
             y = .best_category_name$category,
             label = .best_category_name$name,
             hjust = -0.2,
             vjust = 0.5,
             size = 3.2,
             color = "#000000",
             fill = "#FFEFB8",
             alpha = 1,
             fontface = "bold"
    )
}

# Inserção do nome do jogo percente ao ranking geral

anotar_1_ranking <- function(.name_game) {
    annotate("label",
             family = "LexiReadable",
             x = .name_game$wishing,
             y = .name_game$category,
             label = .name_game$name,
             hjust = 1,
             vjust = -0.5,
             size = 3.2,
             color = "#000000",
             fill = "#C1EEFF",
             alpha = 1,
             fontface = "bold"
    )
}

# Segunda opção do nome do jogo percente ao ranking geral para evitar sobreposição no gráfico

anotar_2_ranking <- function(.name_game) {
    annotate("label",
             family = "LexiReadable",
             x = .name_game$wishing,
             y = .name_game$category,
             label = .name_game$name,
             hjust = 1,
             vjust = 1.4,
             size = 3.2,
             color = "#000000",
             fill = "#C1EEFF",
             alpha = 1,
             fontface = "bold"
    )
}

# categorias selecionadas (Selecionamos algumas cateroiras)
categorias <- c("Ancient", "Card Game", "City Building", "Civilization", "Economic",
                "Trains", "Deduction", "Party Game", "Spies/Secret Agents",
                "Word Game", "Environmental","Industry / Manufacturing", "Science Fiction",
                "Space Exploration", "Animals", "Farming", "Renaissance", "Fighting","Miniatures",
                "Fantasy", "Abstract Strategy", "Puzzle", "Dice", "Movies / TV / Radio theme",
                "Educational", "Humor", "Bluffing", "Adventure", "Exploration", 
                "Prehistoric", "Medical", "Modern Warfare", "Horror")
    
 # Obtenção dos melhores por categoria por meio da função best_for_category()

best_ancient <- best_for_category(categorias[1])
best_card_game <- best_for_category(categorias[2])
best_city_building <- best_for_category(categorias[3])
best_civilization <- best_for_category(categorias[4])
best_trains<- best_for_category(categorias[6])
best_deduction <- best_for_category(categorias[7])
best_party_game <- best_for_category(categorias[8])
best_spies_secrets_agents <- best_for_category(categorias[9])
best_word_game <- best_for_category(categorias[10])
best_environmental <- best_for_category(categorias[11])
best_industry_manufacturing <- best_for_category(categorias[12])
best_science_fiction <- best_for_category(categorias[13])
best_space_exploration <- best_for_category(categorias[14])
best_animals <- best_for_category(categorias[15])
best_farming <- best_for_category(categorias[16])
best_renaissance <- best_for_category(categorias[17])
best_fighting <- best_for_category(categorias[18])
best_miniatures <- best_for_category(categorias[19])
best_fantasy <- best_for_category(categorias[20])
best_abstract_strategy <- best_for_category(categorias[21])
best_puzzle <- best_for_category(categorias[22])
best_dice <- best_for_category(categorias[23])
best_educational <- best_for_category(categorias[25])
best_humor <- best_for_category(categorias[26])
best_bluffing <- best_for_category(categorias[27])
best_adventure <- best_for_category(categorias[28])
best_exploration <- best_for_category(categorias[29])
best_prehistoric <- best_for_category(categorias[30])
best_modern_warfare <- best_for_category(categorias[32])
best_horror <- best_for_category(categorias[33])


# os melhores do ranking fora da lista
terraforming_mars <- jogos_tabuleiro_categoria |> 
    select(name, min_play_time, wishing, category, rank, owned, min_players) |> 
    filter(name == "Terraforming Mars") |> 
    arrange(desc(category)) |> 
    head(1)

gloomhaven <- jogos_tabuleiro_categoria |> 
    select(name, min_play_time, wishing, category, rank, owned, min_players) |>
    filter(name == "Gloomhaven") |> 
    arrange(desc(category)) |> 
    head(1)

gloomhaven_jaws_of_the_lion <- jogos_tabuleiro_categoria |> 
    select(name, min_play_time, wishing, category, rank, owned, min_players) |>
    filter(name == "Gloomhaven: Jaws of the Lion") |> 
    arrange(desc(category)) |> 
    head(1)

gaia_project <- jogos_tabuleiro_categoria |> 
    select(name, min_play_time, wishing, category, rank, owned, min_players) |>
    filter(name == "Gaia Project") |> 
    arrange(desc(category)) |> 
    head(1)

dune_imperium <- jogos_tabuleiro_categoria |> 
    select(name, min_play_time, wishing, category, rank, owned, min_players) |>
    filter(name == "Dune: Imperium") |> 
    arrange(desc(category)) |> 
    head(1)

nemesis <- jogos_tabuleiro_categoria |> 
    select(name, min_play_time, wishing, category, rank, owned, min_players) |>
    filter(name == "Nemesis") |> 
    arrange(desc(category)) |> 
    head(1)

a_feast_for_odin<- jogos_tabuleiro_categoria |> 
    select(name, min_play_time, wishing, category, rank, owned, min_players) |>
    filter(name == "A Feast for Odin") |> 
    arrange(desc(category)) |> 
    head(1)

wingspan<- jogos_tabuleiro_categoria |> 
    select(name, min_play_time, wishing, category, rank, owned, min_players) |>
    filter(name == "Wingspan") |> 
    arrange(desc(category)) |> 
    head(1)

everdell<- jogos_tabuleiro_categoria |> 
    select(name, min_play_time, wishing, category, rank, owned, min_players) |>
    filter(name == "Everdell") |> 
    arrange(desc(category)) |> 
    head(1)

scythe<- jogos_tabuleiro_categoria |> 
    select(name, min_play_time, wishing, category, rank, owned, min_players) |>
    filter(name == "Scythe") |> 
    arrange(desc(category)) |> 
    head(1)

pandemic<- jogos_tabuleiro_categoria |> 
    select(name, min_play_time, wishing, category, rank, owned, min_players) |>
    filter(name == "Pandemic") |> 
    arrange(desc(category)) |> 
    head(1)

caverna_the_caves_farmers<- jogos_tabuleiro_categoria |> 
    select(name, min_play_time, wishing, category, rank, owned, min_players) |>
    filter(name == "Caverna: The Cave Farmers") |> 
    arrange(desc(category)) |> 
    head(1)

the_7_continent<- jogos_tabuleiro_categoria |> 
    select(name, min_play_time, wishing, category, rank, owned, min_players) |>
    filter(name == "The 7th Continent") |> 
    arrange(desc(category)) |> 
    head(1)


le_havre<- jogos_tabuleiro_categoria |> 
    select(name, min_play_time, wishing, category, rank, owned, min_players) |>
    filter(name == "Le Havre") |> 
    arrange(desc(category)) |> 
    head(1)


```

No gráfico abaixo, selecionamos 32 categorias de jogos. Ele apresenta a relação dos jogos mais desejados pelos usuários com o tempo máximo de duração indicado pela editora de 160 minutos, adquiridos por pelo menos 5000 pessoas e que permitem o jogo por um único jogador. Ele destaca os jogos mais desejados de cada categoria, como também alguns jogos to topo do ranking, mas que não estão nas primeiras posições entre os desejados em suas respectivas categorias.



```{r grafico jogos por categoria desejo ganhar presente e tempo minimo}
#| echo = TRUE,
#| fig.align="center",
#| fig.width = 10,
#| fig.height = 14.8,
#| out.width = 1700,
#| aut.height = 1800

jogos_tabuleiro_categoria |> 
    select(name, min_play_time,
           wishing,
           category, 
           rank, 
           owned, 
           min_players, 
           trading,
           min_play_time) |>
    filter(category %in% categorias & min_play_time <=160 & min_players>=1 & owned >=5000) |> 
    arrange(desc(wishing)) |>
    ggplot() +
    aes(x=wishing,
        y = category,
        color = min_play_time) +
    geom_point(size = 3)+
    labs(                                                      # texto de título, subtítulo e eixos.
    title = "Jogos Destaques por Categoria para Jogar*<span style = 'color:#FFC745;'>sozinho!!
    </span>*",
    subtitle = "Por categoria, desejo de ganhar como presente e tempo mínimo de jogo",
    x = "Número de Pessoas que Desejam o Jogo",                                 
    y = "")+                                                                    
    scale_x_continuous(breaks = seq(0, 20000,5000),                                # padrões eixo x.
                       limits = c(0,20000))+
    scale_y_discrete(labels = str_wrap(                            # quebra do texto y com str_wrap.
        categorias,
        width = 15))+                                              
    theme_classic() +                                                         # tema para o gráfico.
    theme(                                                       # customiza:
        panel.background = element_rect(fill = "#002642"),                       # fundo do gráfico.
        plot.background = element_rect(fill = "#237CA9"),                  # fundo do frame externo.
        plot.margin = unit(c(1, 1, 1, -0.3), "cm"),                            # margens do gráfico.
        plot.title = element_markdown(                                          # padrões do título.
            size = 42,
            face = "plain",
            family = "FrankyOutline",
            hjust = 1,
            margin = unit(c(0.2, 0, 0.5, 0), "cm")
        ),                                                   
        plot.subtitle = element_markdown(                                    # padrões do subtitulo.
            color = "#FFFFFF",
            size = 12,
            hjust = 0,
            face = "bold"
        ),
        text = element_text(                                       # padrões dos elementos de texto.
            family = "LexieReadable",                         
            color = "#FFFFFF",
            size = 10,
            hjust = 0,
            face = "bold"
        ),
        axis.text.x = element_text(                                    # padrões do texto do eixo x.
            color = "#FFFFFF",                                          
            size = 8,
            face = "bold",
            margin = unit(c(0.3, 0, 0.5, 0.5), "cm"),
            family = "LexieReadable",
        ),
        axis.ticks.x = element_line(color = "#000000"),               # padrões dos ticks do eixo x.
        axis.line.x = element_line(color = "#000000"),                       # eixo x na cor branca.
        axis.text.y = element_text(                                    # padrões do texto do eixo y.
            family = "LexieReadable",
            color = "#FFFFFF",
            size = 11,
            face = "bold",
            margin = unit(c(0, 0.3, 0.3, 0), "cm"),
        ),                                                                 
        axis.ticks.y = element_line(color = "#000000"),               # padrões dos ticks do eixo y.
        axis.line.y = element_line(
            color = "#000000",
            size = 0.4,
        ),
        axis.title.x = element_text(                         # padrões da letra do titulo do eixo x.
            face = "bold",                                    
            size = 11,
            hjust = 0.5,
        ),
        legend.title = element_text(size = 9.2,            # padrões da texto do  titulo da legenda.
                                    color = "#FFFFFF", 
                                    face = "bold", 
                                    family = "arial"),
        legend.position = c(0.80,.89),                  # posição da legenda para dentro do gráfico.
        legend.background = element_rect(fill = "#237CA9"),       # padrões para o fundo da legenda.
        legend.text = element_text(size = 6,                          # padrões do texto da legenda.
                                   color = "#FFFFFF",
                                   face = "bold"),
        legend.direction = "horizontal"                                        # posição da legenda.
    )+
    scale_color_gradient(low = "#F68DA0",                 # padrões do escala do gradiente de cores.
                          # mid = "#FF708F",
                          high = "#840B21", 
                          # midpoint =11000,
                          name = "tempo mínimo")+                        # altera o nome da legenda.
    anotar(best_ancient)+        # chama a função anotar para inserir os nomes dos jogos no gráfico.
    anotar(best_card_game)+
    anotar(best_city_building)+
    anotar(best_civilization)+
    anotar(best_trains)+
    anotar(best_deduction)+
    anotar(best_party_game)+
    anotar(best_spies_secrets_agents)+
    anotar(best_word_game)+
    anotar(best_environmental)+
    anotar(best_industry_manufacturing)+
    anotar(best_science_fiction)+
    anotar(best_space_exploration)+
    anotar(best_animals)+
    anotar(best_farming)+
    anotar(best_renaissance)+
    anotar(best_fighting)+
    anotar(best_miniatures)+
    anotar(best_fantasy)+
    anotar(best_abstract_strategy)+
    anotar(best_puzzle)+
    anotar(best_dice)+
    anotar(best_educational)+
    anotar(best_humor)+
    anotar(best_bluffing)+
    anotar(best_exploration)+
    anotar(best_prehistoric)+
    anotar(best_modern_warfare)+
    anotar(best_horror)+
    anotar_1_ranking(terraforming_mars)+
    anotar_1_ranking(gloomhaven)+
    anotar_1_ranking(gloomhaven_jaws_of_the_lion)+
    anotar_2_ranking(gaia_project)+
    anotar_1_ranking(nemesis)+
    anotar_1_ranking(a_feast_for_odin)+
    anotar_1_ranking(wingspan)+
    anotar_2_ranking(everdell)+
    anotar_2_ranking(scythe)+
    anotar_1_ranking(pandemic)+
    anotar_1_ranking(dune_imperium)+
    anotar_1_ranking(caverna_the_caves_farmers)+
    anotar_1_ranking(the_7_continent)+
    anotar_1_ranking(le_havre)+
    annotate("rect",                                         # cria retângulo ao redor das legendas.
             xmin = 13400, 
             xmax = 20000, 
             ymin = 28, 
             ymax = 32 ,
             fill = "#237CA9",
             color = "#FFFFFF", 
             alpha = 1)+
    annotate("rect",                   # cria retângulo para legenda "mais desejados por categoria".
             xmin = 18700, 
             xmax = 19600, 
             ymin = 30, 
             ymax = 30.6,
             fill = "#C1EEFF", 
             alpha = 1, 
             color = "#1F1F1F", 
             size = 0.3)+
    annotate("rect",                      # cria retângulo para legenda "melhores no ranking geral".
             xmin = 18700, 
             xmax = 19600, 
             ymin = 30.6, 
             ymax = 31.2,
             fill = "#FFEFB8", 
             alpha = 1, 
             color = "#000000", 
             size = 0.3)+
    annotate("text",                         # cria texto da legenda "mais desejados por categoria".
             x = 16100, 
             y = 30.7, 
             label = "mais desejados por categoria",
             color = "#FFFFFF", family = "arial",
             size = 3.2, 
             fontface = "bold")+
    annotate("text",                            # cria texto da legenda "melhores no ranking geral".
             x = 16350, 
             y = 30.1, 
             label = "melhores no ranking geral",
             color = "#FFFFFF", family = "arial",
             size = 3.2,
             fontface = "bold")

```











<br><br><br>


Com base nos dados analisados, listei abaixo 10 jogos que constam nas relações de 20 melhores rankings e 20 mais desejados.

```{r tabela primeira selecao de jogos}
#| echo: FALSE

jogos_selecao01 <- c(          # relação aleatória dos jogos selecionadas a partir das duas análises
    "Gloomhaven",
    "Scythe",
    "Terraforming Mars",
    "Spirit Island",
    "Gaia Project",
    "Nemesis",
    "Wingspan",
    "Everdell",
    "A Feast for Odin",
    "Robinson Crusoe: Adventures on the Cursed Island"
)
selecao01 <- jogos_tabuleiro |>               # seleção das colunas com as informações para a tabela
  select(
    name,
    year,
    min_players,
    min_age,
    playing_time,
    min_play_time,
    max_play_time
  ) |>
  filter(jogos_tabuleiro$name %in% jogos_selecao01) |>    # filtrar os dados de acordo com selecao01
  kable(col.names = c("nome", "ano", "min jogadores",     #renomear na tabela os nomes das variáveis
        "min idade", "tempo jogo", "min tempo jogo",
        "max tempo jogo")) |> 
  kable_styling(
    html_font = "get_schwifty",                                     # definimos a fonte do cabeçalho
    font_size = 12,                                                  # tamanho da fonte do cabeçalho
    position = "center",                                                         # posição da tabela
    full_width = TRUE, 
    htmltable_class = "lightable-hover",                                         #  fonte das linhas 
    fixed_thead = list(enabled = T, background = "#E9EBED")           # outros formatos do cabeçalho
  ) |> 
    column_spec(1,  bold = FALSE, background = "#1F1F1F", color = "#FFFFFF") |>    # formato colunas
    column_spec(2,  bold = FALSE, background = "#1F1F1F", color = "#FFFFFF") |>
    column_spec(3,  bold = FALSE, background = "#1F1F1F", color = "#FFFFFF") |>
    column_spec(4,  bold = FALSE, background = "#1F1F1F", color = "#FFFFFF") |>
    column_spec(5,  bold = FALSE, background = "#1F1F1F", color = "#FFFFFF") |>
    column_spec(6,  bold = FALSE, background = "#1F1F1F", color = "#FFFFFF") |>
    column_spec(7,  bold = FALSE, background = "#1F1F1F", color = "#FFFFFF") |> 
    row_spec(1, align = "right") |>                                                 # formato linhas
    row_spec(2, align = "right") |> 
    row_spec(3, align = "right") |> 
    row_spec(4, align = "right") |> 
    row_spec(5, align = "right") |> 
    row_spec(6, align = "right") |> 
    row_spec(7, align = "right") |>
    row_spec(8, align = "right") |> 
    row_spec(9, align = "right") |> 
    row_spec(10, align = "right")

selecao01                                                               # mostra a tabela no retório
```

<br><br>

<div align=justify style="text-indent: 3em;"> Abaixo você pode encontrar a descrição destes jogos, segundo a base de dados. Selecione o nome do jogo para ler a descrição completa segundo a base de dados *"Board Games"*:


```{r sidebarlayout input nome output descricao}
#| echo: FALSE

fluidPage(                                      # selecionar o nome do filme para acesso à descrição
    h4("Descrição do Jogo de Tabuleiro",
       style = "color: #00121F;
       background:#E9EBED;
       width:455px;
       line-height: 2.5;"),
    sidebarLayout(                                    # input dos dados à esquerda e saída à direita
        sidebarPanel = sidebarPanel(width = 7.0,          # painel para o input dos nomes dos filmes
            div(style = "margin-right: 35px; 
                font-size:18;
                text-align:left;",                  # aumentar a margem direita do painel
                div(style = "text-align:left;",
                    div(style = "text-align:left;color:#000000;",
                        shiny::selectInput(
                inputId = "nome",                               # cria a chave para acesso aos dados
                label = "Informe aqui o nome do jogo para consulta" ,# label que aparecerá no painel
                choices = c(                                             # jogos da lista de seleção
                    "Scythe",
                    "Nemesis",
                    "Wingspan",
                    "Gloomhaven",
                    "Terraforming Mars",
                    "Spirit Island",
                    "Gaia Project",
                    "Everdell",
                    "A Feast for Odin",
                    "Robinson Crusoe: Adventures on the Cursed Island"
                    ),
                )
                )
            )
            )
        ),
        mainPanel = mainPanel(             # vamos definir a saída dos dados à direita do inputPanel
            fluidRow(
                column(
                    width = 8.5,
                    offset = 0,
                    div(style = "background-color:#00121F;
                        width:850px;
                        color:#FFFFFF;
                        font-weight:normal;
                        line-height:1.8",
                        output$tab1 <- renderTable(                                 # renderiza a tabela
                        {
                            descricao <- jogos_tabuleiro |>   
                                filter(name == input$nome) |> 
                                select(description) |> 
                                 rename("Descrição" = "description") 
                            descricao 
                    },
                    width = "850px",      # largura do texto para ocupar todo a largura do relatório
                )
                )
            ),
            width = 2 
        ),
        position = "left",
    )
    )
 )


```


